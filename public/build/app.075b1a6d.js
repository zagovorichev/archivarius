(self.webpackChunk=self.webpackChunk||[]).push([[143],{7593:(t,e,n)=>{var o={"./dashboard_controller.js":1646,"./hello_controller.js":83};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id=7593},9437:(t,e,n)=>{"use strict";(0,n(2192).x)(n(7593))},1646:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>re});n(8304),n(489),n(2419),n(1539),n(3710),n(8011),n(9070),n(2526),n(1817),n(2165),n(8783),n(6992),n(3948);var o=n(7931),a=(n(3734),n(7042),n(8309),n(1038),n(9753),n(9755)),r=n.n(a),i=(n(6977),n(1058),n(1112),n(4678),n(2025)),c=n.n(i),l=n(9755);c().autoDiscover=!1;var f,s=!1;function u(){return{init:function(t){if(!s){var e=l("#src-media"),n=document.querySelector(".dropzone");if(!n)return;(f=new(c())(n,{dictDefaultMessage:e.data("text"),params:{id:e.data("id")}})).on("error",(function(t,e){console.log(t,e)})),f.on("success",(function(e,n){t(n)})),s=!0}},destroy:function(){f.destroy(),s=!1}}}n(5306),n(4916);var d,p,h,v,y,m,b,g,k,w,x,j,C,O,T,S,P,E,R,_,A,D,F,V,I,U,L,M,N,W,q,G=!1;function $(){return{init:function(){d=r()(".file-modal"),p=r()(".src-title",d),y=r()(".src-id",d),h=r()(".load-media",d),v=r()(".delete-media",d),b=r()(".save-media",d),m=!1},show:function(t,e,n){p.val(e.docTitle),y.text(e.docOrigName),d.off("hidden.bs.modal").on("hidden.bs.modal",(function(){var t=!0===m?"delete":null;G&&(t="update"),n(t,G),m=!1,G=!1})).modal(),h.off("click").on("click",(function(){var n="<form style='display: none;' method='POST' action='/doc/get_media'>";n+="<input type='hidden' name='id' value='"+t+"'>",n+="<input type='hidden' name='path' value='"+e.docPath.replace("\\","\\\\").replace("'","'")+"'>",n+="</form>";var o=r()(n);r()("body").append(o),o.submit()})),v.off("click").on("click",(function(){r().ajax("/doc/media",{method:"DELETE",data:{id:t,path:e.docPath}}).done((function(){m=!0,d.modal("hide")}))})),b.off("click").on("click",(function(){r().ajax("/doc/media",{method:"PUT",data:{id:t,path:e.docPath,title:p.val()}}).done((function(t){G=t,d.modal("hide")}))}))},destroy:function(){p.val(""),y.text(""),h.data("path",""),v.data("path",""),G=!1,m=!1}}}function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function H(){return{download:function(t){var e,n="<form style='display: none;' method='POST' action='/doc/archive'>",o=z(t);try{for(o.s();!(e=o.n()).done;){n+="<input type='hidden' name='id[]' value='"+e.value+"'>"}}catch(t){o.e(t)}finally{o.f()}n+="</form>";var a=r()(n);r()("body").append(a),a.submit()}}}function J(){return{init:function(){g=r()(".src-modal"),w=r()(".src-id",g),T=r()(".delete",g),S=r()(".save",g),k=r()(".src-title",g),x=r()("#src-media"),j=r()(".document-list",g),C=r()("table",j),E=r()(".src-float",g),R=r()(".src-text",g),A=r()(".date-created",g),_=r()(".date-updated",g),D=r()(".load-archive",g),u().init(),$().init()},openEditForm:function(t){var e;u().destroy(),x.data("id",t.id),u().init(),w.text(t.id),k.val(t.title),R.val(t.description),E.val(parseFloat(t.floatVal)),A.text(t.createdAt),_.text(t.updatedAt),D.off("click").on("click",(function(){H().download([t.id])})),e=t.tags,r()(".tag-item",g).each((function(){var t=r()(this);t.prop("checked",!1),-1!==r().inArray(t.val(),e)&&t.prop("checked",!0)})),g.modal(),T.off("click").on("click",(function(){r().ajax("/doc/"+t.id,{method:"DELETE"}).done((function(){K().removeActiveRow(),g.modal("hide")}))})),S.off("click").on("click",(function(){var e=[];r()(".tag-item:checkbox:checked",g).each((function(t){e[t]=r()(this).val()})),r().ajax("/doc/"+t.id,{method:"PUT",data:{title:k.val(),description:R.val(),floatVal:E.val(),tags:e}}).done((function(t){K().removeActiveRow(),K().addRow(t),g.modal("hide")}))})),O&&O.destroy(),O=C.DataTable({paging:!1,searching:!1,ordering:!1,select:!0,autoWidth:!0,info:!1,language:{emptyTable:C.data("text")},columns:[{data:"docTitle"},{data:"docOrigName"}],data:t.documents}),u().destroy(),x.data("id",t.id),u().init((function(t){(P=O.row.add(t)).draw()})),r()("tbody",C).off("click").on("click","tr",(function(){var e=(P=O.row(this)).data();e&&e.hasOwnProperty("docTitle")&&(g.modal("hide"),$().show(t.id,e,(function(t,e){g.modal(),"delete"===t?P.remove().draw():"update"===t?(P.remove(),(P=O.row.add(e)).draw()):P=null})))}))},destroy:function(){$().destroy(),u().destroy(),w.text(""),k.val(""),S.off("click"),T.off("click"),_.text(""),A.text("")}}}function K(){return{init:function(){F=r()(".documents-table"),V=r()(".spinner-border",F),I=r()(".found-count",F),U=r()(".cnt",I),W=r()(".amount-fv"),L=r()("table",F)},loadTable:function(t){for(var e in V.hide(),U.text(t.count),I.show(),q=0,t.documents)t.documents.hasOwnProperty(e)&&(q+=t.documents[e].floatVal);W.text(q.toFixed(2)),M?(M.clear().draw(),M.rows.add(t.documents),M.draw(),N=null):(M=L.DataTable({paging:!1,searching:!1,ordering:!1,select:!0,autoWidth:!0,info:!1,language:{emptyTable:L.data("text")},columns:[{data:"title"},{data:"tags"},{data:"floatVal"}],data:t.documents}),r()("tbody",L).on("click","tr",(function(){var t=(N=M.row(this)).data();t&&J().openEditForm(t)})),L.show())},addRow:function(t){var e=parseInt(U.text());U.text(++e),q+=t.floatVal,W.text(q.toFixed(2)),(N=M.row.add(t)).draw()},addRecord:function(t){this.addRow(t),J().openEditForm(t)},removeActiveRow:function(){var t=parseInt(U.text());U.text(--t),q-=N.data().floatVal,W.text(q.toFixed(2)),N.remove().draw()},destroy:function(){V.show(),I.hide(),U.text("0"),L.hide(),W.text("0")}}}var Q,X,Y,Z,tt,et;n(561);function nt(){var t=function(){r().ajax("/settings",{method:"PUT",data:{projects:X.is(":checked"),users:Y.is(":checked")}}).done((function(){Dt().setReloadOnClose()}))};return{init:function(){Q=r()(".config-settings"),X=r()("#projects-checkbox",Q),Y=r()("#users-checkbox",Q),Z=r()(".settings-modal"),tt=r()(".setting-users-btn",Z).closest(".nav-item"),et=r()(".setting-projects-btn",Z).closest(".nav-item"),X.off("change").on("change",(function(){r()(this).is(":checked")?et.show():et.hide(),t()})),Y.off("change").on("change",(function(){r()(this).is(":checked")?tt.show():tt.hide(),t()}))},destroy:function(){X.off("change"),Y.off("change")}}}n(9554),n(4747);var ot,at,rt,it,ct,lt,ft,st,ut,dt,pt,ht,vt,yt,mt,bt,gt,kt,wt,xt,jt="finance";function Ct(){var t=function(t){!function(t){var e=r()("<a>");e.addClass("list-group-item"),e.addClass("list-group-item-action"),e.attr("id","list-".concat(t.id)),e.data("toggle","list"),e.attr("role","tab"),e.attr("aria-controls",t.id),e.text(t.title),e.on("click",(function(){r()(".list-group-item-action.active",ut).removeClass(".active"),r()(".tab-pane.show",dt).removeClass(".show"),r()(".tab-pane.active",dt).removeClass(".active");var e=r()("#".concat(t.id));e.addClass("show"),e.addClass("active")})),e.prependTo(ut)}(t),function(t){var e=r()("<div>");e.addClass("tab-pane"),e.addClass("fade"),e.attr("id",t.id),e.attr("role","tabpanel"),e.attr("aria-labelledby","list-".concat(t.id)),e.text("test"),e.appendTo(dt)}(t)},e=function(){(rt=r()(".button-add",at)).off("click").on("click",(function(){r().ajax("/projects",{method:"POST",data:{color:it.val(),title:ct.val(),type:jt,primary:ft.is(":checked")?1:0}}).done((function(t){console.log(t)}))})),it=r()(".color",at),ct=r()(".title",at),lt=r()(".type",at),(st=r()(".list-group-item",lt)).off("click").on("click",(function(t){r()(".list-group-item",lt).removeClass("active");var e=r()(t.target);e.addClass("active"),jt=e.hasClass("finance")?"finance":"documents"})),ft=r()(".primary",at)},n=function(){r()("#list-new-project").off("click").on("click",(function(){r()(".list-group-item-action.active",ut).removeClass(".active"),r()(".tab-pane.show",dt).removeClass(".show"),r()(".tab-pane.active",dt).removeClass(".active");var t=r()("#new-project");t.addClass("show"),t.addClass("active")})),e()};return{init:function(){ot=r()(".projects-tab"),at=r()(".add-form",ot),ut=r()(".projects-list-group",ot),dt=r()(".projects-tab-content",ot),n(),r().ajax("/projects",{method:"GET"}).done((function(e){e.projects.forEach((function(e){t(e)}))}))},destroy:function(){rt.off("click"),st.off("click")}}}var Ot,Tt,St,Pt,Et,Rt,_t,At=!1;function Dt(){var t=function(t){switch(vt.removeClass("active"),yt.removeClass("active"),mt.removeClass("active"),bt.removeClass("active"),gt.hide(),kt.hide(),wt.hide(),xt.hide(),t){case"tags":vt.addClass("active"),gt.show();break;case"users":yt.addClass("active"),kt.show();break;case"projects":mt.addClass("active"),wt.show();break;case"config":bt.addClass("active"),xt.show()}};return{init:function(){pt=r()(".settings"),(ht=r()(".settings-modal")).on("hide.bs.modal",(function(){At&&location.reload()})),pt.off("click").on("click",(function(){ht.modal()})),gt=r()(".tag-settings",ht),kt=r()(".users-settings",ht),wt=r()(".project-settings",ht),xt=r()(".config-settings",ht),(vt=r()(".setting-tags-btn",ht)).off("click").on("click",(function(){t("tags")})),(yt=r()(".setting-users-btn",ht)).off("click").on("click",(function(){t("users")})),(mt=r()(".setting-projects-btn",ht)).off("click").on("click",(function(){t("projects")})),(bt=r()(".setting-config-btn",ht)).off("click").on("click",(function(){t("config")})),t("tags"),nt().init(),Ct().init()},setReloadOnClose:function(){At=!0},destroy:function(){pt.off("click"),t("tags"),mt.off("click"),yt.off("click"),vt.off("click"),nt().destroy(),Ct().destroy()}}}function Ft(){var t=function(){r().ajax("/tags",{method:"POST",data:{title:Tt.val(),color:Et.val()}}).done((function(t){Dt().setReloadOnClose(),function(t){Rt.row.add(t).draw()}(t),Tt.val("")}))};return{init:function(){Ot=r()(".add-tag-form"),Tt=r()(".tag-name",Ot),Et=r()(".color",Ot),Pt=r()(".button-add-tag",Ot),_t=r()(".tags-list"),St=r()("table",_t),r().ajax("/tags",{method:"GET"}).done((function(e){Rt||(Rt=St.DataTable({paging:!1,searching:!1,ordering:!1,select:!0,autoWidth:!0,info:!1,language:{emptyTable:St.data("text")},columns:[{data:"title"},{data:"color"}],data:e.tags})),r()("tbody",St).on("click","tr",(function(){var t=Rt.row(this),e=t.data();e&&confirm(St.data("delete"))&&r().ajax("/tags",{method:"DELETE",data:{title:e.title}}).done((function(){Dt().setReloadOnClose(),t.remove().draw()}))})),Pt.off("click").on("click",(function(){t()}))}))},getTags:function(){return Rt.data()},destroy:function(){Tt.val(""),Et.val(""),St.hide(),Pt.off("click")}}}var Vt,It,Ut,Lt,Mt,Nt,Wt,qt,Gt,$t,zt=n(9755),Bt=[];function Ht(){var t=function(t){Ut.text(t.toFixed(2))},e=function(t){var e=Ft().getTags();for(var n in e)if(e.hasOwnProperty(n)&&e[n].title===t)return e[n].color;return"#000"},n=function(n){var o=0,a=Lt.is(":checked");It.data.datasets=[],It.data.labels=[];var r={},i=n.documents;for(var c in i)if(i.hasOwnProperty(c)){var l=i[c],f=l.tags;for(var s in f)if(f.hasOwnProperty(s)){var u=f[s];if(r.hasOwnProperty(u)){var d=parseFloat(r[u].floatVal)+parseFloat(l.floatVal);r[u].floatVal=d.toFixed(2)}else r[u]={floatVal:parseFloat(l.floatVal),title:u,color:e(u)};if(o+=l.floatVal,a)break}}t(o);var p={label:"Dataset",data:[],backgroundColor:[]};for(var h in r)if(r.hasOwnProperty(h)){var v=r[h];It.data.labels.push(v.title),p.data.push(v.floatVal),p.backgroundColor.push(v.color)}It.data.datasets.push(p),Vt.update()};return{init:function(){Ut=zt(".total-floatvals"),(Lt=zt(".aggregate-floatval")).change((function(){n(Bt)}));var t=document.getElementById("searchTagChart").getContext("2d"),e=zt("#searchTagChart");It={type:"doughnut",data:{datasets:[],labels:[]},options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:e.data("text")},animation:{animateScale:!0,animateRotate:!0}}},Vt=new Chart(t,It)},updateChart:function(t){Bt=t,n(t)},destroy:function(){It.data.datasets.splice(0,1),Vt.update(),Lt.off("click"),t(0)}}}function Jt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Qt(){var t=function(t){var e=[];r()(Wt).each((function(t){r()(this).prop("checked")&&e.push(r()(this).val())})),r().ajax(Nt.data("url"),{method:"POST",data:{q:Nt.val(),tags:e}}).done((function(e){K().loadTable(e),Ht().updateChart(e),t&&t(e)}))};return{init:function(){K().init(),Mt=r()(".seeker-group"),Nt=r()(".seeker",Mt),qt=r()(".search-btn",Mt),Gt=r()(".download-search-results",Mt),Wt=r()(".tag-item",Mt),Nt.off("keypress").on("keypress",(function(e){13===e.which&&t()})),Wt.off("click").on("click",(function(){t()})),qt.off("click").on("click",(function(){t()})),Gt.off("click").on("click",(function(){t((function(t){var e,n=[],o=Jt(t.documents);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push(a.id)}}catch(t){o.e(t)}finally{o.f()}n.length&&H().download(n)}))})),t()},destroy:function(){Nt.off("keypress"),qt.off("click"),Wt.off("click"),K().destroy()}}}function Xt(){return{init:function(){($t=r()(".create-btn")).off("click").on("click",(function(){r().ajax({url:r()(this).data("href")}).done((function(t){K().addRecord(t)}))}))},destroy:function(){$t.off("click")}}}function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function te(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ne(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ae(t);if(e){var a=ae(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe(this,n)}}function oe(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(r,t);var e,n,o,a=ne(r);function r(){return Zt(this,r),a.apply(this,arguments)}return e=r,(n=[{key:"connect",value:function(){Ft().init(),Dt().init(),J().init(),Qt().init(),Xt().init(),Ht().init()}},{key:"disconnect",value:function(){Ft().destroy(),Dt().destroy(),J().destroy(),Qt().destroy(),Xt().destroy(),Ht().destroy()}}])&&te(e.prototype,n),o&&te(e,o),r}(o.Controller)},83:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});n(8304),n(489),n(2419),n(1539),n(3710),n(8011),n(9070),n(2526),n(1817),n(2165),n(8783),n(6992),n(3948);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=f(t);if(e){var a=f(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(f,t);var e,n,o,l=c(f);function f(){return a(this,f),l.apply(this,arguments)}return e=f,(n=[{key:"connect",value:function(){this.element.textContent="Hello Stimulus! Edit me in assets/controllers/hello_controller.js"}}])&&r(e.prototype,n),o&&r(e,o),f}(n(7931).Controller)}},0,[[9437,666,578]]]);